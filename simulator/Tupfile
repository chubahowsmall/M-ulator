include_rules

SUBS += cli/built-in.o
SUBS += cpu/built-in.o
SUBS += core/built-in.o

ifeq (@(TUP_PLATFORM),macosx)
LDFLAGS += -lpython `python -c "import distutils.sysconfig; print distutils.sysconfig.get_config_var('LINKFORSHARED')"`
endif

ifeq (@(TUP_PLATFORM),linux)
LDFLAGS += `python2-config --ldflags`
LDFLAGS += -lrt
endif

: foreach *.c |> !cc |> {objs}
: {objs} $(SUBS) |> !ld |> simulator
